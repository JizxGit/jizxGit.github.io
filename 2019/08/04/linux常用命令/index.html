<!DOCTYPE html>
<html lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no">
<meta name="author" content="jizx">



<meta name="description" content="处理数据常用的命令，包括 sort、awk、cut 等常用命令（持续 ing）">
<meta name="keywords" content="linux,命令,awk,更新ing">
<meta property="og:type" content="article">
<meta property="og:title" content="linux常用命令">
<meta property="og:url" content="https://jizx.top/2019/08/04/linux常用命令/index.html">
<meta property="og:site_name" content="玖玖的博客">
<meta property="og:description" content="处理数据常用的命令，包括 sort、awk、cut 等常用命令（持续 ing）">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-09-04T15:44:07.848Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="linux常用命令">
<meta name="twitter:description" content="处理数据常用的命令，包括 sort、awk、cut 等常用命令（持续 ing）">

<link rel="apple-touch-icon" href="/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="玖玖的博客" type="application/atom+xml">



    <link rel="shortcut icon" href="https://avatars1.githubusercontent.com/u/18480104?s=40&v=4">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">



<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>linux常用命令 | 玖玖的博客</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: false,
        isPost: true,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: true
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head></html>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/avatar.png" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">jizx</a></h1>
        </hgroup>

        
        <p class="header-subtitle">个人学习笔记，各种杂杂碎碎O(∩_∩)O</p>
        

        
            <form id="search-form">
            <input type="text" id="local-search-input" name="q" placeholder="search..." class="search form-control" autocomplete="off" autocorrect="off" searchonload="false">
            <i class="fa fa-times" onclick="resetSearch()"></i>
            </form>
            <div id="local-search-result"></div>
            <p class="no-result">No results found <i class="fa fa-spinner fa-pulse"></i></p>
        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">分类&amp;标签</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="mailto:1822980003@qq.com" title="Email"></a>
                            
                                <a class="fa GitHub" href="https://github.com/JizxGit" title="GitHub"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/anaconda/">anaconda</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/atom/">atom</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/awk/">awk</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jupyter/">jupyter</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/logging/">logging</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/notepad/">notepad++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/photoshop/">photoshop</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pickle/">pickle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shell/">shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vim/">vim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vscode/">vscode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/乱码/">乱码</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/从句/">从句</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/传参/">传参</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/健康/">健康</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/右键/">右键</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/同理心/">同理心</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/吵架/">吵架</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/命令/">命令</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/复合句/">复合句</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/心理/">心理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/截图/">截图</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/所见所闻/">所见所闻</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/打印/">打印</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/批评/">批评</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/效率/">效率</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/方法调用/">方法调用</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/时态/">时态</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/曲线/">曲线</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/更新ing/">更新ing</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/正则表达式/">正则表达式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/算法/">算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/类/">类</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/系统优化/">系统优化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/系统环境/">系统环境</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/编码问题/">编码问题</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/编辑器/">编辑器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/通配符/">通配符</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/面试/">面试</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">博客主题原作者MOxFIVE</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">在读研究生二年级</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">jizx</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/avatar.png" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">jizx</a></h1>
            </hgroup>
            
            <p class="header-subtitle">个人学习笔记，各种杂杂碎碎O(∩_∩)O</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">分类&amp;标签</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:1822980003@qq.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/JizxGit" title="GitHub"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我">
</nav>
      <div class="body-wrap"><article id="post-linux常用命令" class="article article-type-post" itemscope="" itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2019/08/04/linux常用命令/" class="article-date">
      <time datetime="2019-08-04T11:21:32.000Z" itemprop="datePublished">2019-08-04</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      linux常用命令
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/linux/">linux</a>
    </div>


        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/awk/">awk</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/linux/">linux</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/命令/">命令</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/更新ing/">更新ing</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <excerpt in="" index="" |="" 首页摘要=""> 

<p>处理数据常用的命令，包括 sort、awk、cut 等常用命令（持续 ing）</p>
<a id="more"></a>
<the rest="" of="" contents="" |="" 余下全文="">



<h3 id="uniq"><a href="#uniq" class="headerlink" title="uniq"></a>uniq</h3><p>uniq命令用于报告或忽略文件中的重复行，<strong>查重复行的时候，只会检查相邻的行</strong>，因此一般与<a href="http://man.linuxde.net/sort" target="_blank" rel="noopener">sort</a>命令结合使用，让重复的排在一起。比如下面：<code>aa</code> 统计结果是出现了 2 次，后面又有出现 1 次的 <code>aa</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 文本</span><br><span class="line">aa</span><br><span class="line">aa</span><br><span class="line">c</span><br><span class="line">aa</span><br><span class="line"></span><br><span class="line"># uniq 后</span><br><span class="line">uniq -c </span><br><span class="line">2 aa</span><br><span class="line">1 c</span><br><span class="line">1 aa</span><br></pre></td></tr></table></figure>
<p>常用参数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-c或——count：			在每列旁边显示该行重复出现的次数；</span><br><span class="line">-u或——unique：		仅显示出一次的行列；</span><br><span class="line">-d或--repeated：		仅输出重复出现的行列，且重复的只输出一行；</span><br><span class="line">-D, --all-repeated   仅输出重复的行，有几行输出几行  </span><br><span class="line">-i, --ignore-case    不区分大小写  </span><br><span class="line">-w&lt;字符位置&gt;或--check-chars=&lt;字符位置&gt;   指定要比较的前 n 个字符，忽略后面的内容</span><br><span class="line">-f&lt;栏位&gt;或--skip-fields=&lt;栏位&gt;         忽略前n列（空格分割），-f 1 忽略第一列</span><br><span class="line">-s&lt;字符位置&gt;或--skip-chars=&lt;字符位置&gt;   忽略前n个字符 -s 4 忽略前 4 个字符</span><br><span class="line">-z 忽略换行(不知道有什么用)</span><br></pre></td></tr></table></figure>
<p>提供的测试文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">this is a test  </span><br><span class="line">this is a test  </span><br><span class="line">this is a test  </span><br><span class="line">i am tank  </span><br><span class="line">i love tank  </span><br><span class="line">i love tank  </span><br><span class="line">this is a test  </span><br><span class="line">whom have a try  </span><br><span class="line">WhoM have a try </span><br><span class="line">WhoM have a try1</span><br><span class="line">you  have a try  </span><br><span class="line">i want to abroad  </span><br><span class="line">those are good men  </span><br><span class="line">we are good men</span><br></pre></td></tr></table></figure></p>
<p>参考：<a href="http://blog.51yip.com/shell/1022.html" target="_blank" rel="noopener">http://blog.51yip.com/shell/1022.html</a></p>
<h3 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h3><table>
<thead>
<tr>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>-b</td>
<td>–ignore-leading-blanks</td>
<td>排序时忽略起始的空白</td>
</tr>
<tr>
<td>-c</td>
<td>–check</td>
<td>不排序，但检查输入数据是不是已排序；未排序的话，报告</td>
</tr>
<tr>
<td>-t</td>
<td>–field-separator=SEP</td>
<td>指定分隔符，如果是<code>\t</code>，需要这样<code>sort -t$&#39;\t&#39; file</code></td>
</tr>
<tr>
<td>-u</td>
<td>–unique</td>
<td>在输出行中去除重复行</td>
</tr>
<tr>
<td>-n</td>
<td>–numeric-sort</td>
<td>默认是字符串比较，指定-n使用数值比较</td>
</tr>
<tr>
<td>-g</td>
<td>–general-number-sort</td>
<td>按通用数值来排序（跟-n不同，把值当浮点数来排序，支持科学 计数法表示的值）</td>
</tr>
<tr>
<td>-r</td>
<td>–reverse</td>
<td>默认从小到大，指定后改为从大到小排序</td>
</tr>
<tr>
<td>-f</td>
<td>–ignore-case</td>
<td>默认情况下，会将大写字母排在前面；这个参数会忽略大小写</td>
</tr>
<tr>
<td>-o</td>
<td>–output=file</td>
<td>排序结果输出到指定文件，对于<strong>保存到原文件很有用</strong>，不然是可以用重定向的</td>
</tr>
<tr>
<td>-m</td>
<td>–merge</td>
<td>将两个已排序数据文件合并</td>
</tr>
<tr>
<td>-k</td>
<td>–key=POS1[,POS2]</td>
<td>指定排序的列，排序从POS1位置开始；如果指定了POS2的话， 到POS2位置结 束</td>
</tr>
<tr>
<td>-z</td>
<td>–zero-terminated</td>
<td>NULL字符作为行尾，而不是用换行符</td>
</tr>
</tbody>
</table>
<h4 id="k"><a href="#k" class="headerlink" title="-k"></a>-k</h4><p>选项的语法格式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">FStart.CStart Modifie, FEnd.CEnd Modifier</span><br><span class="line">-------Start---------, -------End--------</span><br><span class="line"> FStart.CStart 选项   ,   FEnd.CEnd 选项</span><br></pre></td></tr></table></figure>
<p>这个语法格式可以被其中的逗号<code>,</code>分为两大部分，<strong>Start</strong>部分和<strong>End</strong>部分。Start部分也由三部分组成，其中的Modifier部分就是我们之前说过的类似n和r的选项部分。</p>
<p>我们重点说说<code>Start</code>部分的<code>FStart</code>和<code>C.Start</code>。<code>C.Start</code>也是可以省略的，省略的话就表示从本域的开头部分开始。<code>FStart.CStart</code>，其中<code>FStart</code>就是表示使用的域，而<code>CStart</code>则表示在<code>FStart</code>域中<strong>从第几个字符开始算“排序首字符”</strong>。同理，在End部分中，你可以设定<code>FEnd.CEnd</code>，如果你省略<code>.CEnd</code>，则表示结尾到“域尾”，即本域的最后一个字符。或者，如果你将CEnd设定为0(零)，也是表示结尾到“域尾”。</p>
<p>在modifier部分还可以用到哪些选项？    modifier不论写在开始还是结束，都对这个域有效（我观察的）</p>
<p>可以用到b、d、f、i、n 或 r。</p>
<ul>
<li>其中n和r你肯定已经很熟悉了。</li>
<li>b表示忽略本域的签到空白符号。</li>
<li>d表示对本域按照字典顺序排序（即，只考虑空白和字母）。</li>
<li>f表示对本域忽略大小写进行排序。</li>
<li>i表示忽略“不可打印字符”，只针对可打印字符进行排序。（有些ASCII就是不可打印字符，比如\a是报警，\b是退格，\n是换行，\r是回车等等）</li>
</ul>
<p><strong>如果指定的域都一样，那就会从第一个域、第二个域依次升序比较</strong></p>
<p><strong>跨域的设定是个假象</strong>，FStart 与FEnd必须相同</p>
<h4 id="多列排序"><a href="#多列排序" class="headerlink" title="多列排序"></a>多列排序</h4><p>sort按照某列排序，一样的话再按某一列排序</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort  -k2,2 -k5,5 wide_table |grep <span class="string">"DD4486F320A7F0C112E2757C26609769"</span></span><br></pre></td></tr></table></figure>
<h4 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h4><ol>
<li><p>从公司英文名称的第二个字母开始进行排序：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sort -t &apos; &apos; -k 1.2 facebook.txt</span><br><span class="line">baidu 100 5000</span><br><span class="line">sohu 100 4500</span><br><span class="line">google 110 5000</span><br><span class="line">guge 50 3000</span><br></pre></td></tr></table></figure>
<p> 使用了<code>-k 1.2</code>，表示对第一个域的第二个字符开始到本域的最后一个字符为止的字符串进行排序。</p>
</li>
<li><p>按照员工工资降序排序，如果员工人数相同的，则按照公司人数升序排序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sort -n -t &apos; &apos; -k 3r -k 2 facebook.txt</span><br><span class="line">baidu 100 5000</span><br><span class="line">google 110 5000</span><br><span class="line">sohu 100 4500</span><br><span class="line">guge 50 3000</span><br></pre></td></tr></table></figure>
<p>在-k 3后面偷偷加上了一个小写字母r。<strong>r和-r选项的作用是一样的，就是表示逆序，不过只对当前域有效</strong>，表示第三个域（员工平均工资）是按照降序排序。此处你还可以加上n，就表示对这个域进行排序时，要按照数值大小进行排序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sort -t &apos; &apos; -k 3nr -k 2n facebook.txt</span><br><span class="line">baidu 100 5000</span><br><span class="line">google 110 5000</span><br><span class="line">sohu 100 4500</span><br><span class="line">guge 50 3000</span><br></pre></td></tr></table></figure>
<p>我们去掉了最前面的-n选项，而是将它加入到了每一个-k选项中了。</p>
</li>
<li><p>只针对公司英文名称的第二个字母进行排序，如果相同的按照员工工资进行降序排序</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sort -t &apos; &apos; -k 1.2,1.2 -k 3nr facebook.txt</span><br><span class="line">baidu 100 5000</span><br><span class="line">google 110 5000</span><br><span class="line">sohu 100 4500</span><br><span class="line">guge 50 3000</span><br></pre></td></tr></table></figure>
<blockquote>
<p>  我们使用了-k 1.2,1.2的表示方式，表示我们“只”对第二个字母进行排序。（如果你问“我使用-k 1.2怎么不行？”，当然不行，因为你省略了End部分，这就意味着你将对从第二个字母起到本域最后一个字符为止的字符串进行排序）。</p>
</blockquote>
</li>
<li><p>最诡异的排序（跨域是不行的）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ sort -n -k 2.2,3.1 facebook.txt</span><br><span class="line">guge 50 3000</span><br><span class="line">baidu 100 5000</span><br><span class="line">sohu 100 4500</span><br><span class="line">google 110 5000</span><br></pre></td></tr></table></figure>
<p>以第二个域的第二个字符开始到第三个域的第一个字符结束的部分进行排序。</p>
<p>第一行，会提取0 3，第二行提取00 5，第三行提取00 4，第四行提取10 5。</p>
<p>又因为sort认为0小于00小于000小于0000….</p>
<p>因此0 3肯定是在第一个。10 5肯定是在最后一个。但为什么00 5却在00 4前面呢？（你可以自己做实验思考一下。）</p>
<p>答案揭晓：原来“跨域的设定是个假象”，sort只会比较第二个域的第二个字符到第二个域的最后一个字符的部分，而不会把第三个域的开头字符纳入比较范围。当发现00和00相同时，sort就会自动比较第一个域去了。当然baidu在sohu前面了。</p>
</li>
</ol>
<p><a href="http://blog.chinaunix.net/uid-10540984-id-313479.html" target="_blank" rel="noopener">http://blog.chinaunix.net/uid-10540984-id-313479.html</a></p>
<h3 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h3><h4 id="常用参数"><a href="#常用参数" class="headerlink" title="常用参数"></a>常用参数</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grep pattern filename  <span class="comment"># 默认支持正则</span></span><br><span class="line">grep -e pattern1 -e pattern2 filename</span><br></pre></td></tr></table></figure>
<p>默认情况下，grep命令用基本的Unix风格正则表达式来匹配模式。Unix风格正则表达式采用特殊字符来定义怎样查找匹配的模式。</p>
<p>需要注意的是：限定连续字符范围 的<code>{}</code>符号在 shell 是有特殊意义的，因此， 我们必须要使用字符 <code>\{</code> 与<code>\}</code> 来让它失去特殊意义才行。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">grep --color=auto <span class="string">" 在输出行中着重标记出匹配到的模式</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">-a  # 将 binary 文件以 text 文件的方式搜寻数据</span></span><br><span class="line"><span class="string">-e  # 如果要指定多个匹配模式，可用-e参数来指定每个模式,grep -e t -e f file 输出了含有字符t或字符f的所有行。</span></span><br><span class="line"><span class="string">-o 	# 只输出匹配到的文本，如果在同一行中，会分开显示</span></span><br><span class="line"><span class="string">-v  # 打印出不匹配match_pattern的所有行</span></span><br><span class="line"><span class="string">-c	# 统计匹配行的数量，并不是匹配的次数。匹配次数需要与-o配合，请看后面的例子</span></span><br><span class="line"><span class="string">-n  # 打印出匹配字符串所在行的行号,以及该行的内容，如果涉及多个文件，该选项也会随输出结果打印出文件名</span></span><br><span class="line"><span class="string">-i # 忽略模式中的大小写</span></span><br><span class="line"><span class="string">-l # 多文件处理时，可以列出匹配模式所在的文件</span></span><br><span class="line"><span class="string">-L # 与-l相反，它会返回一个不匹配的文件列表</span></span><br><span class="line"><span class="string">-q # 静默模式（主要用于脚本中，，在命令行中没什么用），只判断是否匹配成功,不会输出任何内容。它仅是运行命令，然后根据命令执行成功与否返回退出状态。0表示匹配成功，非0表示匹配失败。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># 显示前后几行</span></span><br><span class="line"><span class="string">-A # after，显示匹配到的行以及之后的 n 行</span></span><br><span class="line"><span class="string">-B # before，显示匹配到的行以及之前的 n 行</span></span><br><span class="line"><span class="string">-C # Center，显示匹配到的行以及前后的 n </span></span><br><span class="line"><span class="string"># 如果匹配到多行，为了区分匹配到的字符串，用"</span>--<span class="string">"进行区分，比如：</span></span><br><span class="line"><span class="string">echo -e "</span>a\nb\nc\na\nb\nc<span class="string">" | grep a -A 1</span></span><br><span class="line"><span class="string"># a		匹配到第1次</span></span><br><span class="line"><span class="string"># b</span></span><br><span class="line"><span class="string"># --</span></span><br><span class="line"><span class="string"># a		匹配到第2次</span></span><br><span class="line"><span class="string"># c</span></span><br></pre></td></tr></table></figure>
<p>统计匹配项的数量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo -e &quot;1 2 3 4\nhello\n5 6&quot; | egrep -o &quot;[0-9]&quot; | wc -l</span><br></pre></td></tr></table></figure>
<h4 id="扩展用法"><a href="#扩展用法" class="headerlink" title="扩展用法"></a>扩展用法</h4><p>egrep命令是grep的一个衍生，支持POSIX扩展正则表达式。POSIX扩展正则表达式含有更 多的可以用来指定匹配模式的字符，增加了额外的正则表达式元字符集。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">grep -E <span class="string">"[a-z]+"</span> filename</span><br><span class="line"><span class="comment">#或</span></span><br><span class="line">egrep <span class="string">"[a-z]+"</span> filename</span><br></pre></td></tr></table></figure>
<h4 id="不使用正则表达式"><a href="#不使用正则表达式" class="headerlink" title="不使用正则表达式"></a>不使用正则表达式</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grep -F &apos;str&apos;</span><br><span class="line">fgrep &apos;str&apos;</span><br></pre></td></tr></table></figure>
<p><code>fgrep</code> 查询速度比<code>grep</code>命令快，但是不够灵活：它<strong>只能找固定的文本，而不是正则表达式。</strong></p>
<p>如果你想在一个文件或者输出中找到包含星号字符的行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fgrep  <span class="string">'*'</span> /etc/profile</span><br><span class="line"><span class="comment">#或</span></span><br><span class="line">grep -F <span class="string">'*'</span> /etc/profile</span><br></pre></td></tr></table></figure>
<p>fgrep则是另外一个版本，支持将匹配模式 指定为用换行符分隔的一列固定长度的字符串。这样就可以把这列字符串放到一个文件中，然后 在fgrep命令中用其在一个大型文件中搜索字符串了。</p>
<h4 id="检索文件内容"><a href="#检索文件内容" class="headerlink" title="检索文件内容"></a>检索文件内容</h4><p>递归搜索目录中的文件内容（不是文件名）<code>-R</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grep <span class="string">"test_function()"</span> ./ -R -n </span><br><span class="line"><span class="comment"># ./miscutils/test.c:16:test_function(); 找到在test.c的第16行</span></span><br></pre></td></tr></table></figure>
<p>等价于<code>find . -type f | xargs grep &quot;test_function()&quot;</code></p>
<p>命令会打印出匹配任意一种模式的行，每个匹配对应一行输出。例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> this is a line of text | grep -o -e <span class="string">"this"</span> -e <span class="string">"line"</span> this</span><br></pre></td></tr></table></figure>
<p>可以将多个模式定义在文件中。选项-f可以读取文件并使用其中的模式（一个模式一行，记得最后留一行空白行，不然最后一种模式匹配不到，很诡异）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cat pat_file</span><br><span class="line"><span class="comment"># ^h.*</span></span><br><span class="line"><span class="comment"># co+l</span></span><br><span class="line"><span class="comment"># </span></span><br><span class="line"><span class="built_in">echo</span> hello \n this is cool | grep -f pat_file </span><br><span class="line"><span class="comment"># hello </span></span><br><span class="line"><span class="comment"># this is cool</span></span><br></pre></td></tr></table></figure>
<h4 id="指定或者排除文件"><a href="#指定或者排除文件" class="headerlink" title="指定或者排除文件"></a>指定或者排除文件</h4><p>使用–include选项在目录中递归搜索所有的 .c和 .cpp文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep <span class="string">"main()"</span> . -r --include *.&#123;c,cpp&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>  注意，<code>some{string1,string2,string3}</code> 会被扩展成 <code>somestring1 somestring2 somestring3</code>。</p>
</blockquote>
<p> 相反的就是<code>--exclude</code></p>
<p><code>--exclude-dir</code>可以排除目录：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep main . -r -exclude-dir CVS</span><br></pre></td></tr></table></figure>
<p><code>--exclude-from FILE</code>从文件中读取排除文件列表</p>
<h4 id="0值字节后缀的-xargs"><a href="#0值字节后缀的-xargs" class="headerlink" title="0值字节后缀的 xargs"></a>0值字节后缀的 xargs</h4><p>xargs命令可以为其他命令提供命令行参数列表。</p>
<p>当文件名作为命令行参数时，建议用0值字节作为文件名终结符，而非空格。因为一些文件名中会包含空格字符，一旦它被误解为终结符， 那么单个文件名就会被视为两个（例如，New file.txt被解析成New和file.txt两个文件名）。</p>
<p>这个问题可以利用0值字节后缀来避免。</p>
<p>grep和find命令可以生成带有0值字节后缀的输出，然后传递 给 xargs，让它产生文件名列表。为了指明输入中的文件名是以0值字节作为终结，需 要在xargs中使用选项-0。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建测试文件：</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"test"</span> &gt; file1  </span><br><span class="line"><span class="built_in">echo</span> <span class="string">"cool"</span> &gt; file2 </span><br><span class="line"><span class="built_in">echo</span> <span class="string">"test"</span> &gt; file3</span><br><span class="line"></span><br><span class="line"><span class="comment"># 找出包含有 test 内容的文件名，并以0值字节作为终结符，然后传递给 xargs，让它生成文件名参数列表，之后传递（不用管道符号）给 rm 命令，删除这些文件</span></span><br><span class="line">grep <span class="string">"test"</span> file* -lZ | xargs -0 rm</span><br><span class="line"></span><br><span class="line"><span class="comment"># 选项-l告诉grep只输出有匹配出现的文件名。选项-Z使得grep使用0值字节（\0）作为文 件名的终结符。这两个选项通常都是配合使用的。xargs的-0选项会使用0值字节作为输入的分隔符</span></span><br></pre></td></tr></table></figure>
<h4 id="比较两个文件相同的行与不同的行"><a href="#比较两个文件相同的行与不同的行" class="headerlink" title="比较两个文件相同的行与不同的行"></a>比较两个文件相同的行与不同的行</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grep -Ff  file1 file2   <span class="comment"># 输出公共的行</span></span><br><span class="line">grep -vFf  file1 file2   <span class="comment"># 输出不在 file1 的行</span></span><br></pre></td></tr></table></figure>
<h3 id="tr"><a href="#tr" class="headerlink" title="tr"></a>tr</h3><h4 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h4><p>tr是translate（转换）的简写，基本功能是将字符从一个字符集合映射到另一个集合中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tr set1 set2</span><br></pre></td></tr></table></figure>
<blockquote>
<p>  注意： <code>tr</code>只能通过<code>stdin</code> 接收输入，无法通过命令行参数接收 ，如<code>tr -s &#39;&#39; file</code>，只能转为 <code>stdin</code> 形式，<code>tr -s &#39; &#39;&lt; file.txt</code></p>
</blockquote>
<p>如果两个字符组的长度不相等，那么set2会不断复制其最后一个字符，直到长度与set1 相同。如果set2的长度大于set1，那么在set2中超出set1长度的那部分字符则全部被忽略。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;HELLO WHO IS THIS&quot; | tr &apos;A-Z&apos; &apos;a-z&apos;</span><br></pre></td></tr></table></figure>
<p>字符集合（字符组）可以使用“起始字符—终止字符”，如果不是有效的连续字符序列， 那么它就会被视为<code>起始字符</code>、<code>—</code>、<code>终止字符</code>这3个元素的集合。也可以使用像<code>\t</code>、<code>\n</code> 这种特殊字符或其他ASCII字符。可以按照需要追加字符或<strong>字符类</strong>来构造自己的字符组。</p>
<table>
<thead>
<tr>
<th>字符类</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>alnum</td>
<td>字母和数字</td>
</tr>
<tr>
<td>alpha</td>
<td>字母</td>
</tr>
<tr>
<td>cntrl</td>
<td>控制（非打印）字符</td>
</tr>
<tr>
<td>digit</td>
<td>数字</td>
</tr>
<tr>
<td>graph</td>
<td>图形字符</td>
</tr>
<tr>
<td>lower</td>
<td>小写字母</td>
</tr>
<tr>
<td>print</td>
<td>可打印字符</td>
</tr>
<tr>
<td>punct</td>
<td>标点符号</td>
</tr>
<tr>
<td>space</td>
<td>空白字符</td>
</tr>
<tr>
<td>upper</td>
<td>大写字母</td>
</tr>
<tr>
<td>xdigit</td>
<td>十六进制字符</td>
</tr>
</tbody>
</table>
<p>字符类的使用方法<code>tr &#39;[:lower:]&#39; &#39;[:upper:]&#39;</code></p>
<h4 id="其他参数"><a href="#其他参数" class="headerlink" title="其他参数"></a>其他参数</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tr [options] set1  [set2]</span><br><span class="line">-d     # 删除(delete)set1 中的字符</span><br><span class="line">-c     # tr会将不在set1中的字符转换成set2中的字符,set2只能是一个字符</span><br><span class="line">-d -c  # 只保留set1的字符，不需要set2</span><br><span class="line">-s     # 删除重复字符，只留下一个</span><br></pre></td></tr></table></figure>
<h4 id="例子-1"><a href="#例子-1" class="headerlink" title="例子"></a>例子</h4><p>tr命令可以用来加密。ROT13是一个著名的加密算法。在ROT13算法中，字符会被移动13 个位置，因此文本加密和解密都使用同一个函数：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"tr came, tr saw, tr conquered."</span> | tr <span class="string">'a-zA-Z'</span> <span class="string">'n-za-mN-ZA-M'</span></span><br></pre></td></tr></table></figure>
<p>将制表符转换成单个空格：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tr <span class="string">'\t'</span> <span class="string">' '</span> &lt; file.txt</span><br></pre></td></tr></table></figure>
<p> 删除字符</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;Hello 123 world 456&quot; | tr -d &apos;0-9&apos; </span><br><span class="line"># Hello world</span><br></pre></td></tr></table></figure>
<p>只保留set1 的字符</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo hello 1 char 2 next 4 | tr -d -c &apos;0-9 \n&apos;</span><br><span class="line"># 124</span><br></pre></td></tr></table></figure>
<p>压缩空格</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;GNU  is   not     UNIX.     Recursive       GNU is not UNIX. Recursive right ?&quot; | tr -s &apos; &apos;</span><br></pre></td></tr></table></figure>
<h3 id="cut"><a href="#cut" class="headerlink" title="cut"></a>cut</h3><p>cut命令可以按列，而不是按行来切分文件。该命令可用于处理使用固定宽度字段的文件、 CSV文件或是由空格分隔的文件。</p>
<blockquote>
<p>  如果空格的长度不一致，需要使结合<code>tr</code>命令，进行字符串转换</p>
</blockquote>
<p>每列被称为一个<strong>字段</strong>，默认分隔符是制表符<code>\t</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-d&quot;\t&quot;    # 指定分割符为&quot;\t&quot;，默认就是制表符，因此可以不写</span><br><span class="line">-f2,3     # 显示2,3列的内容,f2可以不用空格分开</span><br><span class="line">-f2-4     # 显示第2到4列(field)的内容，2-5 的用法看后面表格说明</span><br><span class="line">-c2-5     # 显示第2到5个字符(character)，注意不能与-d 组合</span><br><span class="line">-b2-5     # 显示第2到5个字节(byte)，注意不能与-d 组合</span><br><span class="line">--complement # 与-f 组合使用，显示f没有指定的列，就是取反</span><br><span class="line">--output-delimiter    指定输出时的列分隔符</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cut range_fields.txt -c1-3,6-9 --output-delimiter <span class="string">","</span> </span><br><span class="line"><span class="comment"># abc,fghi </span></span><br><span class="line"><span class="comment"># abc,fghi </span></span><br><span class="line"><span class="comment"># abc,fghi </span></span><br><span class="line"><span class="comment"># abc,fghi</span></span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>选取方式</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>N-</td>
<td>从第N个字节、字符或字段开始到行尾</td>
</tr>
<tr>
<td>N-M</td>
<td>从第N个字节、字符或字段开始到第M个（包括第M个在内）字节、字符或字段</td>
</tr>
<tr>
<td>-M</td>
<td>从第1个字节、字符或字段开始到第M个（包括第M个在内）字节、字符或字段</td>
</tr>
</tbody>
</table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cut -c -2 range_fields.txt    <span class="comment"># 打印前2个字符</span></span><br><span class="line">cut -c2-5 range_fields.txt    <span class="comment"># 打印第2个到第5个字符</span></span><br></pre></td></tr></table></figure>
<h3 id="sed"><a href="#sed" class="headerlink" title="sed"></a>sed</h3><p>sed是stream editor（流编辑器）的缩写。它最常见的用法是进行文本替换。<strong>默认不修改原文件，只显示修改后的结果。</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sed [-hnV][-e&lt;script&gt;][-f&lt;script文件&gt;][文本文件]</span><br><span class="line"></span><br><span class="line">-e &apos;script1;script2&apos;</span><br><span class="line">-f script_file # 从文本中读取大量指令，一行一个，以换行结束</span><br><span class="line">-i # 保存到原文件</span><br><span class="line">-n或--quiet或--silent # 仅显示script处理后的结果。</span><br></pre></td></tr></table></figure>
<p>要是我们想就地（in place）修改文件内容，可以使用选项<code>-i</code>保存到原文件中。值得<strong>推荐的做法</strong>是</p>
<ul>
<li><p>先使用不带<code>-i</code>选项的<code>sed</code>命令，以确保正则表达式没有问题，如果结果符合要求，再加入-i选项将更改写入文件。</p>
</li>
<li><p>也可以使用<code>sed -i.bak &#39;s/abc/def/&#39; file</code>，这时的sed不仅替换文件内容，还会创建一个名为<code>file.bak</code>的文件，其中包含着原始文件内容的副本。</p>
</li>
</ul>
<h5 id="替换s"><a href="#替换s" class="headerlink" title="替换s"></a>替换<code>s</code></h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">s/old/new/          # 替换每行第1个匹配到的字符串</span><br><span class="line">s/old/new/2         # 替换每行第2个匹配到的字符串</span><br><span class="line">s/old/new/g         # 替换全部</span><br><span class="line">s/old/new/2g        # 只替换第2次及之后匹配到的字符串</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> thisthisthisthis | sed <span class="string">'s/this/THIS/2g'</span> </span><br><span class="line"><span class="comment"># thisTHISTHISTHIS</span></span><br></pre></td></tr></table></figure>
<h6 id="替换标记"><a href="#替换标记" class="headerlink" title="替换标记"></a>替换标记</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s/pattern/replacement/flags</span><br></pre></td></tr></table></figure>
<p>有4种可用的替换标记： </p>
<ul>
<li>数字，表明新文本只替换每行第几处模式匹配的地方； </li>
<li>g，表明新文本将会替换所有匹配的文本； </li>
<li>p，表明原先行的内容要打印出来；</li>
<li>w file，将匹配到的行替换的结果写到指定的file中。</li>
</ul>
<p>p替换标记会打印与替换命令中指定的模式匹配的行替换后的结果。这通常会和sed的-n选项一起使用。-n选项将禁止sed编辑器输出。但p替换标记会输出修改过的行。将二者配合使用的效果就是 只输出被替换命令修改过的行。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ cat data5.txt </span><br><span class="line">This is a <span class="built_in">test</span> line.</span><br><span class="line">This is a different line.</span><br><span class="line"></span><br><span class="line">$ $ sed -n <span class="string">'s/test/trial/p'</span> data5.txt </span><br><span class="line">This is a trial line.</span><br></pre></td></tr></table></figure>
<p>w替换标记会产生与 p 模式同样的输出，不过会将输出保存到指定文件中。</p>
<h6 id="分隔符"><a href="#分隔符" class="headerlink" title="分隔符"></a>分隔符</h6><p><code>sed</code>命令会将<code>s</code>之后的字符视为命令分隔符。这允许我们更改默认的分隔符<code>/</code>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed &apos;s:text:replace:g&apos; </span><br><span class="line">sed &apos;s|text|replace|g&apos;</span><br></pre></td></tr></table></figure>
<p>如果作为分隔符的字符出现在模式中，必须使用<code>\</code>对其进行转义</p>
<h6 id="指定行"><a href="#指定行" class="headerlink" title="指定行"></a>指定行</h6><p>方式1（数字）：</p>
<p>在<code>s</code>前添加行编辑即可</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'2s/dog/cat/'</span> data1.txt   <span class="comment"># 只修改地址指定的第2行的文本</span></span><br><span class="line">sed <span class="string">'2,3s/dog/cat/'</span> data1.txt <span class="comment"># 只修改地址指定的第2，3行的文本</span></span><br><span class="line">sed <span class="string">'2,$s/dog/cat/'</span> data1.txt <span class="comment"># 修改从某行开始的所有行</span></span><br></pre></td></tr></table></figure>
<p>方式2（正则）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'/pattern/s/bash/csh/'</span> /etc/passwd  <span class="comment"># 使用 pattern 正则表达式过滤</span></span><br></pre></td></tr></table></figure>
<p><strong>已匹配字符串标记（&amp;）</strong></p>
<p>在sed中，我们可以用&amp;指代模式所匹配到的字符串，这样就能够在替换字符串时使用已匹 配的内容：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo this is an example | sed &apos;s/\w+/[&amp;]/g&apos;</span><br><span class="line"># [this] [is] [an] [example]</span><br></pre></td></tr></table></figure>
<p><strong>子串匹配标记（\num）</strong></p>
<p> 匹配正则中的子表达式，第1 个是<code>\1</code>，第 2 个是<code>\2</code>，以此类推</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo this is digit 7 in a number | sed &apos;s/digit \([0-9]\)/\1/&apos; </span><br><span class="line"># this is 7 in a number</span><br></pre></td></tr></table></figure>
<p><strong>多表达式</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'expression; expression'</span></span><br><span class="line">sed <span class="string">'expression'</span> | sed <span class="string">'expression'</span></span><br><span class="line">sed -e <span class="string">'expression'</span> -e <span class="string">'expression'</span></span><br><span class="line">sed -e <span class="string">'expression; expression'</span></span><br><span class="line">sed -e <span class="string">'</span></span><br><span class="line"><span class="string">&gt; s/brown/green/</span></span><br><span class="line"><span class="string">&gt; s/fox/elephant/</span></span><br><span class="line"><span class="string">&gt; s/dog/cat/'</span> data1.txt</span><br></pre></td></tr></table></figure>
<p>例子</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">echo abc | sed &apos;s/a/A/;s/c/C/&apos;</span><br><span class="line">echo abc | sed &apos;s/a/A/&apos; | sed &apos;s/c/C/&apos;</span><br><span class="line">echo abc | sed -e &apos;s/a/A/&apos; -e &apos;s/c/C/&apos;</span><br><span class="line">echo abc | sed -e &apos;s/a/A/; s/c/C/&apos;</span><br><span class="line"># AbC</span><br></pre></td></tr></table></figure>
<p><strong>单引号与双引号的区别</strong></p>
<p>sed表达式<strong>通常用单引号来引用</strong>。如果想在sed表达式中使用变量，双引号就能派上用场了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">text=hello </span><br><span class="line">echo hello world | sed &quot;s/$text/HELLO/&quot; </span><br><span class="line"># HELLO world</span><br></pre></td></tr></table></figure>
<h5 id="多命令"><a href="#多命令" class="headerlink" title="多命令"></a>多命令</h5><p>如果需要在匹配到的行上执行多条命令，可以用<code>{}</code>将多条命令组合在一起，同时指定过滤的行号，或者匹配模式。</p>
<p>多条命令之间用<code>;</code>分割，或者分成多行书写。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 一行内多个命令</span></span><br><span class="line">sed -n <span class="string">'/root/&#123;s/bash/blueshell/;p;q&#125;'</span> /etc/passwd </span><br><span class="line"></span><br><span class="line"><span class="comment"># 分成多行执行多个命令</span></span><br><span class="line">sed <span class="string">'3,$&#123;</span></span><br><span class="line"><span class="string">&gt; s/brown/green/</span></span><br><span class="line"><span class="string">&gt; s/lazy/active/</span></span><br><span class="line"><span class="string">&gt; &#125;'</span> data1.txt</span><br></pre></td></tr></table></figure>
<h5 id="插入a与i"><a href="#插入a与i" class="headerlink" title="插入a与i"></a>插入<code>a</code>与<code>i</code></h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'[address]command\</span></span><br><span class="line"><span class="string">new line'</span></span><br></pre></td></tr></table></figure>
<p>插入（insert）命令（i）会在指定行前插入文本，（插入的文本要带有换行，否则就直接插入在指定行的头部）</p>
<p>附加（append）命令（a）会在指定行后添加文本，（如果文本没换行，会与下一行在同一行）</p>
<p>可以指定一个行地址，匹配一个数字行号或文本模式</p>
<blockquote>
<p>  这两条命令的费解之处在于它们的格式。它们不能在一行内使用。你必须先输入<code>i</code>或者<code>a</code>，然后使用<code>\</code>进行换行，接着输入要插入或者附加的内容。</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 脚本中的写法</span></span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">"Test Line 2"</span> | sed <span class="string">'1i\   # 在第一行前插入</span></span><br><span class="line"><span class="string">Test Line 1\     # 换行，否则两行文本会在一同一行</span></span><br><span class="line"><span class="string">'</span> </span><br><span class="line">Test Line 1 </span><br><span class="line">Test Line 2</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">echo</span> <span class="string">"Test Line 2"</span> | sed <span class="string">'/Line/a\   # 在包含Line的一行添加</span></span><br><span class="line"><span class="string">Test Line 1\</span></span><br><span class="line"><span class="string">'</span> </span><br><span class="line"></span><br><span class="line">Test Line 2 </span><br><span class="line">Test Line 1</span><br></pre></td></tr></table></figure>
<h6 id="插入多行"><a href="#插入多行" class="headerlink" title="插入多行"></a>插入多行</h6><p>插入或附加多行文本，就必须对要插入或附加的新文本中的每一行使用反斜线，直到最后 一行。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'1i\</span></span><br><span class="line"><span class="string">&gt; This is one line of new text.\</span></span><br><span class="line"><span class="string">&gt; This is another line of new text.'</span> data6.txt </span><br><span class="line"></span><br><span class="line">This is one line of new text.</span><br><span class="line">This is another line of new text.</span><br><span class="line">This is line number 1.</span><br><span class="line">This is line number 2.</span><br><span class="line">This is line number 3.</span><br><span class="line">This is line number 4.</span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<h5 id="删除行-d"><a href="#删除行-d" class="headerlink" title="删除行 d"></a>删除行 <code>d</code></h5><p>删除命令<code>d</code>名副其实，它会删除匹配指定寻址模式的所有行。</p>
<p>支持指定行<code>sed &#39;2,3d&#39; data6.txt</code></p>
<p>通过特定行区间指定：<code>sed &#39;2,3d&#39; data6.txt</code></p>
<p>模式匹配特性也适用于删除命令<code>sed &#39;/number 1/d&#39; data6.txt</code></p>
<p>也可以使用两个文本模式来删除某个区间内的行，但这么做时要小心。</p>
<ul>
<li>sed编辑器会删除两个指定行之间 的所有行（包括指定的行）。<strong>如果没有找到停止模式，所以就将数据流中的剩余行全部删除了。</strong></li>
<li>你指定的第1个模式 会“打开”行删除功能，第2个模式会“关闭”行删除功能。之后<strong>再遇到第1个模式会再打开删除功能</strong>。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ cat data7.txt </span><br><span class="line">This is line number 1.</span><br><span class="line">This is line number 2.</span><br><span class="line">This is line number 3.</span><br><span class="line">This is line number 4.</span><br><span class="line">This is line number 1 again.   <span class="comment"># 再次触发删除功能</span></span><br><span class="line">This is text you want to keep. </span><br><span class="line">This is the last line <span class="keyword">in</span> the file. </span><br><span class="line"></span><br><span class="line">$ sed <span class="string">'/1/,/3/d'</span> data7.txt </span><br><span class="line">This is line number 4.</span><br><span class="line"></span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<h5 id="字符转换y"><a href="#字符转换y" class="headerlink" title="字符转换y"></a>字符转换<code>y</code></h5><p>转换（transform）命令（y）是唯一可以处理单个字符的sed编辑器命令。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[address]y/inchars/outchars/</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">'y/123/789/'</span> data8.txt </span><br><span class="line">This is line number 7.</span><br><span class="line">This is line number 8.</span><br><span class="line">This is line number 9.</span><br><span class="line">This is line number 4.</span><br><span class="line">This is line number 7 again.</span><br><span class="line">This is yet another line.</span><br><span class="line">This is the last line <span class="keyword">in</span> the file. </span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<p>转换命令会对inchars和outchars值进行一对一的映射。</p>
<p>如果inchars和outchars的长度不同，则sed编辑器会产生一 条错误消息。</p>
<p>转换命令是一个全局命令，你无法限定只转换在特定地方出现的字符。</p>
<h5 id="打印命令"><a href="#打印命令" class="headerlink" title="打印命令"></a>打印命令</h5><ol>
<li>p命令用来打印文本行； </li>
<li>等号（=）命令用来打印行号； </li>
<li>l（小写的L）命令用来列出行。</li>
</ol>
<h6 id="p-命令"><a href="#p-命令" class="headerlink" title="p 命令"></a>p 命令</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"this is a test"</span> | sed <span class="string">'p'</span></span><br><span class="line">this is a <span class="built_in">test</span></span><br><span class="line">this is a <span class="built_in">test</span></span><br></pre></td></tr></table></figure>
<p>它所做的就是打印已有的数据文本</p>
<p>最常见的用法是与<code>-n</code>配合打印包含匹配文本模式的行。用-n选项，你可以禁止输出其他行，只打印包含匹配文本模式的行。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ cat data6.txt </span><br><span class="line">This is line number 1.</span><br><span class="line">This is line number 2.</span><br><span class="line">This is line number 3.</span><br><span class="line">This is line number 4.</span><br><span class="line"></span><br><span class="line">$ $ sed -n &apos;/number 3/p&apos; data6.txt </span><br><span class="line">This is line number 3.</span><br></pre></td></tr></table></figure>
<p>修改前后对比</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ sed -n <span class="string">'/3/&#123;</span></span><br><span class="line"><span class="string">&gt; p</span></span><br><span class="line"><span class="string">&gt; s/line/test/p</span></span><br><span class="line"><span class="string">&gt; &#125;'</span> data6.txt </span><br><span class="line">This is line number 3. </span><br><span class="line">This is <span class="built_in">test</span> number 3. $</span><br></pre></td></tr></table></figure>
<h6 id="等号"><a href="#等号" class="headerlink" title="=等号"></a><code>=</code>等号</h6><p>等号命令会打印行在<strong>数据流中的当前行号</strong>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sed &apos;=&apos; data1.txt </span><br><span class="line">1 </span><br><span class="line">The quick brown fox jumps over the lazy dog.</span><br><span class="line">2 </span><br><span class="line">The quick brown fox jumps over the lazy dog.</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ sed -n <span class="string">'/number 4/&#123;</span></span><br><span class="line"><span class="string">&gt; =</span></span><br><span class="line"><span class="string">&gt; p</span></span><br><span class="line"><span class="string">&gt; &#125;'</span> data6.txt 4 </span><br><span class="line">This is line number 4. </span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<h6 id="显示特殊字符l"><a href="#显示特殊字符l" class="headerlink" title="显示特殊字符l"></a>显示特殊字符<code>l</code></h6><p>命令（<code>l</code>）可以打印数据流中的文本和不可打印的ASCII字符。任何不可打印 字符要么在其八进制值前加一个反斜线，要么使用标准C风格的命名法（用于常见的不可打印字符），比如\t，来代表制表符。</p>
<p>制表符的位置使用\t来显示。行尾的美元符表示换行符。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ cat data10.txt </span><br><span class="line">This line contains an escape	character.</span><br><span class="line"></span><br><span class="line">$ $ sed -n <span class="string">'l'</span> data10.txt </span><br><span class="line">This line contains an escape\tcharacter. \a$</span><br></pre></td></tr></table></figure>
<h5 id="保存命令w"><a href="#保存命令w" class="headerlink" title="保存命令w"></a>保存命令<code>w</code></h5><p>w命令用来向文件写入行。该命令的格式如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[address]w filename</span><br></pre></td></tr></table></figure>
<p><code>filename</code>可以使用相对路径或绝对路径，但不管是哪种，运行sed编辑器的用户都必须有文 件的写权限。</p>
<p>地址可以是sed中支持的任意类型的寻址方式，例如单个行号、文本模式、行区间或文本模式。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ cat data11.txt </span><br><span class="line">Blum, R Browncoat </span><br><span class="line">McGuiness, A Alliance</span><br><span class="line">Bresnahan, C Browncoat </span><br><span class="line">Harken, C Alliance </span><br><span class="line">$ </span><br><span class="line">$ sed -n <span class="string">'/Browncoat/w Browncoats.txt'</span> data11.txt </span><br><span class="line">$ </span><br><span class="line">$ cat Browncoats.txt </span><br><span class="line">Blum, R Browncoat </span><br><span class="line">Bresnahan, C Browncoat</span><br></pre></td></tr></table></figure>
<h5 id="读取命令"><a href="#读取命令" class="headerlink" title="读取命令"></a>读取命令</h5><p>读取（read）命令（r）允许你将另一个文件中的数据插入到数据流中。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[address]r filename</span><br></pre></td></tr></table></figure>
<p>地址区间<strong>只能指定单独一个行号或文本模式地址</strong>。sed编辑器会将文件中的<strong>所有文本行</strong>插入到指定地址后。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ cat data12.txt </span><br><span class="line">This is an added line.</span><br><span class="line">This is the second added line. </span><br><span class="line">$ </span><br><span class="line">$ sed <span class="string">'3r data12.txt'</span> data6.txt </span><br><span class="line">This is line number 1.</span><br><span class="line">This is line number 2.</span><br><span class="line">This is line number 3.</span><br><span class="line">This is an added line.</span><br><span class="line">This is the second added line. </span><br><span class="line">This is line number 4.</span><br><span class="line">$</span><br><span class="line">$ sed <span class="string">'/number 2/r data12.txt'</span> data6.txt </span><br><span class="line">This is line number 1.</span><br><span class="line">This is line number 2.</span><br><span class="line">This is an added line.</span><br><span class="line">This is the second added line.</span><br><span class="line">This is line number 3.</span><br><span class="line">This is line number 4.</span><br><span class="line">$</span><br></pre></td></tr></table></figure>
<p>另一个很酷的用法是和删除命令配合使用：利用另一个文件中的数据来替换文件中的占位文本。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ cat notice.std </span><br><span class="line">Would the following people:</span><br><span class="line">LIST </span><br><span class="line">please report to the ship<span class="string">'s captain. </span></span><br><span class="line"><span class="string">$</span></span><br><span class="line"><span class="string">$ sed '</span>/LIST/&#123;</span><br><span class="line">&gt; r data11.txt</span><br><span class="line">&gt; d</span><br><span class="line">&gt; &#125;<span class="string">' notice.std </span></span><br><span class="line"><span class="string">Would the following people:</span></span><br><span class="line"><span class="string">Blum, R Browncoat </span></span><br><span class="line"><span class="string">McGuiness, A Alliance </span></span><br><span class="line"><span class="string">Bresnahan, C Browncoat </span></span><br><span class="line"><span class="string">Harken, C Alliance </span></span><br><span class="line"><span class="string">please report to the ship'</span>s captain. $</span><br><span class="line"></span><br><span class="line">现在占位文本已经被替换成了数据文件中的名单。</span><br></pre></td></tr></table></figure>
<h3 id="压缩命令"><a href="#压缩命令" class="headerlink" title="压缩命令"></a>压缩命令</h3><p>压缩命令 linux 命令行与 shell 脚本编程大全 4.33 </p>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><p>EOF（End-of-File）字符。Ctrl+D组合键会在bash中产生一个EOF字符。</p>
<p>参考：<a href="https://awk.readthedocs.io/en/latest/chapter-one.html" target="_blank" rel="noopener">https://awk.readthedocs.io/en/latest/chapter-one.html</a></p>
</the></excerpt>
      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>本文标题:</span><a href="/2019/08/04/linux常用命令/">linux常用命令</a></p>
        <p><span>文章作者:</span><a href="/" title="回到主页">jizx</a></p>
        <p><span>发布时间:</span>2019-08-04, 19:21:32</p>
        <p><span>最后更新:</span>2019-09-04, 23:44:07</p>
        <p>
            <span>原始链接:</span><a class="post-url" href="/2019/08/04/linux常用命令/" title="linux常用命令">https://jizx.top/2019/08/04/linux常用命令/</a>
            <span class="copy-path" data-clipboard-text="原文: https://jizx.top/2019/08/04/linux常用命令/　　作者: jizx" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target="_blank">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。
        </p>
    </div>



    <nav id="article-nav">
        
            <div id="article-nav-newer" class="article-nav-title">
                <a href="/2019/08/04/anaconda与jupyter使用与设置/">
                    anaconda与jupyter的使用和设置
                </a>
            </div>
        
        
            <div id="article-nav-older" class="article-nav-title">
                <a href="/2019/01/04/mac卸载官网的python/">
                    mac卸载官网的python
                </a>
            </div>
        
    </nav>

  
</article>

    <div id="toc" class="toc-article">
        <strong class="toc-title">文章目录</strong>
        
            <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#uniq"><span class="toc-text">uniq</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sort"><span class="toc-text">sort</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#k"><span class="toc-text">-k</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#多列排序"><span class="toc-text">多列排序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#例子"><span class="toc-text">例子</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#grep"><span class="toc-text">grep</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#常用参数"><span class="toc-text">常用参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#扩展用法"><span class="toc-text">扩展用法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#不使用正则表达式"><span class="toc-text">不使用正则表达式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#检索文件内容"><span class="toc-text">检索文件内容</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#指定或者排除文件"><span class="toc-text">指定或者排除文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#0值字节后缀的-xargs"><span class="toc-text">0值字节后缀的 xargs</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#比较两个文件相同的行与不同的行"><span class="toc-text">比较两个文件相同的行与不同的行</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tr"><span class="toc-text">tr</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#基本用法"><span class="toc-text">基本用法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#其他参数"><span class="toc-text">其他参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#例子-1"><span class="toc-text">例子</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cut"><span class="toc-text">cut</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sed"><span class="toc-text">sed</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#替换s"><span class="toc-text">替换s</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#替换标记"><span class="toc-text">替换标记</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#分隔符"><span class="toc-text">分隔符</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#指定行"><span class="toc-text">指定行</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#多命令"><span class="toc-text">多命令</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#插入a与i"><span class="toc-text">插入a与i</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#插入多行"><span class="toc-text">插入多行</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#删除行-d"><span class="toc-text">删除行 d</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#字符转换y"><span class="toc-text">字符转换y</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#打印命令"><span class="toc-text">打印命令</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#p-命令"><span class="toc-text">p 命令</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#等号"><span class="toc-text">=等号</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#显示特殊字符l"><span class="toc-text">显示特殊字符l</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#保存命令w"><span class="toc-text">保存命令w</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#读取命令"><span class="toc-text">读取命令</span></a></li></ol></li></ol><li class="toc-item toc-level-3"><a class="toc-link" href="#压缩命令"><span class="toc-text">压缩命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#其他"><span class="toc-text">其他</span></a></li>
        
    </div>
    <style>
        .left-col .switch-btn,
        .left-col .switch-area {
            display: none;
        }
        .toc-level-4 i,
        .toc-level-4 ol {
            display: none !important;
        }
    </style>

    <input type="button" id="tocButton" value="隐藏目录" title="点击按钮隐藏或者显示文章目录">

    <script>
        yiliaConfig.toc = ["隐藏目录", "显示目录", !!"false"];
    </script>





    




    <div class="scroll" id="post-nav-button">
        
            <a href="/2019/08/04/anaconda与jupyter使用与设置/" title="上一篇: anaconda与jupyter的使用和设置">
                <i class="fa fa-angle-left"></i>
            </a>
        

        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/2019/01/04/mac卸载官网的python/" title="下一篇: mac卸载官网的python">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/09/04/bash定制命令提示符/">bash定制命令提示符</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/09/02/awk/">awk</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/08/13/linux-shell编程/">linux shell编程</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/08/06/python模块-小工具大全/">python模块-小工具大全</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/08/06/python模块-logging/">python模块-logging</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/08/04/anaconda与jupyter使用与设置/">anaconda与jupyter的使用和设置</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/08/04/linux常用命令/">linux常用命令</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/04/mac卸载官网的python/">mac卸载官网的python</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/18/photoshop曲线原理与应用/">photoshop曲线原理与应用</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/18/正则表达式必知必会/">正则表达式必知必会</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/18/shell通配符/">shell通配符</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/15/window添加右键用atom打开/">window添加右键用atom打开</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/12/notepad常用插件/">notepad常用插件与设置</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/04/chrome截取整个网页/">chrome截取整个网页</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/22/Git教程/">Git教程</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/19/python编码问题/">python编码问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/07/04/java方法传参问题/">java方法传参问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/17/如何有效批评而不是吵架/">如何有效批评而不是吵架</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/17/剑指offer/">剑指offer</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/23/运动后不能马上洗澡/">运动后不能马上洗澡</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/23/喜欢人的理由为什么说不出来/">喜欢人的理由为什么说不出来</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/23/全球公认的最健康的一天作息图解/">全球公认的最健康的一天作息图解</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/23/如何提高「钝感力」，从此不再「想太多」/">如何提高「钝感力」，从此不再「想太多」</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/03/java嵌套类/">java嵌套类</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/02/11/英语语法——中级：第3章-完成时态/">英语语法——中级：第3章.完成时态</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/02/11/英语语法——中级：第2章-名词、定语、状语从句/">英语语法——中级：第2章.名词、定语、状语从句</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/02/11/英语语法——中级：第1章-简单句与复合句/">英语语法——中级：第1章.简单句与复合句</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/08/vim常用按键总结/">vim常用按键总结</a></li></ul>




    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2017-2019 jizx
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style="display:none">
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style="display:none">
                        <span id="page-visit" title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 6;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>





    <script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>


<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>