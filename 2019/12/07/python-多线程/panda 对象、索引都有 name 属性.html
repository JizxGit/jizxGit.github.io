<p>panda 对象、索引都有 name 属性</p>
<ol>
<li><p>series，可以认为它是一个长度固定且有序的字典</p>
<ol>
<li><p>索引index，可以指定字符串数组为索引，根据此数组顺序进行排序，索引对象是不可变的，无法修改索引对象。</p>
<pre><code>index[1]=&apos;d&apos;  # TypeError
</code></pre></li>
<li><p>值 value</p>
</li>
</ol>
</li>
<li><p>dataframe，表示矩阵的数据表，行列索引都用，列索引一般由你指定，行索引可以自动生成，可以嵌套 dataframe</p>
</li>
<li><p>当你将列表或者数组赋值给列时，长度必须与 DataFrame 匹配</p>
</li>
</ol>
<h3 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h3><p><code>Frame[&quot;colunm&quot;]</code>可以获取列，<code>frame.colunm</code> 也可以，但是必须是有效的 Python 值，不存在键时会报错</p>
<p><code>Frame[&quot;colunm&quot;]=arrange(6)</code>可以创建新的列，但是<code>Frame.colunm=arrange(6)</code>不可以</p>
<p>索引像数组一样，但是方法像集合</p>
<p><img src="image-20191215160830739.png" alt="image-20191215160830738"></p>
<h4 id="reindex"><a href="#reindex" class="headerlink" title="reindex"></a>reindex</h4><pre><code class="python">df2=df.reindex(index=[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>],columns=[<span class="string">'f'</span>,<span class="string">'d'</span>,<span class="string">'w'</span>])
</code></pre>
<p>method=’ffile’，向前填充，’bfill’向后填充</p>
<p>fill_value=0 这是填充值</p>
<h4 id="drop"><a href="#drop" class="headerlink" title="drop"></a>drop</h4><p>删除 指定行、列，并返回新的对象，如果要修改原对象，可以设置 inplace=True</p>
<pre><code class="python">data.drop([<span class="string">"row1"</span>])
data.drop([<span class="string">"col1"</span>],axis=<span class="number">1</span>)
data.drop([<span class="string">"col1"</span>],axis=<span class="number">1</span>,inplace=<span class="keyword">True</span>)
</code></pre>
<p>数值切片时与 Python 一致不含之后一列，但是字符串切片时，是包含最后的。</p>
<h4 id="loc-与-iloc"><a href="#loc-与-iloc" class="headerlink" title="loc 与 iloc"></a>loc 与 iloc</h4><p>loc 轴标签，iloc 整数标签</p>
<pre><code class="python">data.loc[[<span class="number">1</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">0</span>,<span class="number">1</span>]]
loc[:<span class="number">1</span>] <span class="comment"># 包含 1</span>
iloc[:<span class="number">1</span>] <span class="comment"># 不包含1 ，有点坑</span>
</code></pre>
<h3 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h3><p><code>sort_index(axis=)</code>，对索引进行排序</p>
<p><code>sort_values(by=[&#39;a&#39;,&#39;b&#39;])</code>，对值进行排序</p>
<h3 id="缺失值"><a href="#缺失值" class="headerlink" title="缺失值"></a>缺失值</h3><p>na ： not available</p>
<pre><code>dropna 过滤掉 na (how=&apos;all&apos;, axis=1，thresh=2)全部是 na 时才是删除，并指定为列，thresh 表示只删除第2列或者行
fillna 替换 na
isnull 判断是否为 na
notnull
</code></pre><h2 id="创建对象"><a href="#创建对象" class="headerlink" title="创建对象"></a>创建对象</h2><h3 id="series"><a href="#series" class="headerlink" title="series"></a>series</h3><pre><code>s = pd.Series([1, 3, 5, np.nan, 6, 8])
</code></pre><h3 id="dataFrame"><a href="#dataFrame" class="headerlink" title="dataFrame"></a>dataFrame</h3><p>传递数组</p>
<pre><code class="python">dates = pd.date_range(<span class="string">'20130101'</span>, periods=<span class="number">6</span>) <span class="comment"># 创建时间列表，作为下面的索引</span>
<span class="string">"""</span>
<span class="string">DatetimeIndex(['2013-01-01', '2013-01-02', '2013-01-03', '2013-01-04','2013-01-05', '2013-01-06'], dtype='datetime64[ns]', freq='D')</span>
<span class="string">"""</span>

df = pd.DataFrame(np.random.randn(<span class="number">6</span>, <span class="number">4</span>), index=dates, columns=list(<span class="string">'ABCD'</span>)) <span class="comment"># index是行索引，columns 是列索引</span>
<span class="string">"""</span>
<span class="string">                   A         B         C         D</span>
<span class="string">2013-01-01  0.469112 -0.282863 -1.509059 -1.135632</span>
<span class="string">2013-01-02  1.212112 -0.173215  0.119209 -1.044236</span>
<span class="string">2013-01-03 -0.861849 -2.104569 -0.494929  1.071804</span>
<span class="string">2013-01-04  0.721555 -0.706771 -1.039575  0.271860</span>
<span class="string">2013-01-05 -0.424972  0.567020  0.276232 -1.087401</span>
<span class="string">2013-01-06 -0.673690  0.113648 -1.478427  0.524988</span>
<span class="string">"""</span>
</code></pre>
<p>传递字典</p>
<pre><code class="python">df2 = pd.DataFrame({<span class="string">'A'</span>: <span class="number">1.</span>,
               <span class="string">'B'</span>: pd.Timestamp(<span class="string">'20130102'</span>),
               <span class="string">'C'</span>: pd.Series(<span class="number">1</span>, index=list(range(<span class="number">4</span>)), dtype=<span class="string">'float32'</span>),
               <span class="string">'D'</span>: np.array([<span class="number">3</span>] * <span class="number">4</span>, dtype=<span class="string">'int32'</span>),
               <span class="string">'E'</span>: pd.Categorical([<span class="string">"test"</span>, <span class="string">"train"</span>, <span class="string">"test"</span>, <span class="string">"train"</span>]),
               <span class="string">'F'</span>: <span class="string">'foo'</span>})

<span class="string">"""</span>
<span class="string">     A          B    C  D      E    F</span>
<span class="string">0  1.0 2013-01-02  1.0  3   test  foo</span>
<span class="string">1  1.0 2013-01-02  1.0  3  train  foo</span>
<span class="string">2  1.0 2013-01-02  1.0  3   test  foo</span>
<span class="string">3  1.0 2013-01-02  1.0  3  train  foo</span>
<span class="string">"""</span>
</code></pre>
<h2 id="查看"><a href="#查看" class="headerlink" title="查看"></a>查看</h2><h4 id="查看部分内容"><a href="#查看部分内容" class="headerlink" title="查看部分内容"></a>查看部分内容</h4><pre><code>df.head()
df.tail(3)
</code></pre><h4 id="查看索引"><a href="#查看索引" class="headerlink" title="查看索引"></a>查看索引</h4><pre><code class="python">df.index     <span class="comment"># 行索引</span>
df.columns   <span class="comment"># 列索引</span>
</code></pre>
<h4 id="转为-numpy"><a href="#转为-numpy" class="headerlink" title="转为 numpy"></a>转为 numpy</h4><pre><code>df.to_numpy()
Out[17]: 
array([[ 0.4691, -0.2829, -1.5091, -1.1356],
       [ 1.2121, -0.1732,  0.1192, -1.0442],
       [-0.8618, -2.1046, -0.4949,  1.0718],
       [ 0.7216, -0.7068, -1.0396,  0.2719],
       [-0.425 ,  0.567 ,  0.2762, -1.0874],
       [-0.6737,  0.1136, -1.4784,  0.525 ]])
</code></pre><blockquote>
<p>  使用<a href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_numpy.html#pandas.DataFrame.to_numpy"><code>DataFrame.to_numpy()</code>](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_numpy.html#pandas.DataFrame.to_numpy) 有时代价会非常大，特别是当每列数据类型不同的时候，这是pandas 与 NumPy本质的不同造成的: <strong>整个NumPy数组只有一种数据类型 ,而 pandas 的每一列都可以是不同的数据类型</strong>. 当你使用<code>DataFrame.to_numpy()</code></a>, pandas 要选择一种能覆盖 DataFrame 中所有数据的 NumPy dtype ，最终往往是<code>object</code>, 这就需要将每个值都转为 Python object类型。</p>
</blockquote>
<h4 id="查看数值类型的列的统计信息"><a href="#查看数值类型的列的统计信息" class="headerlink" title="查看数值类型的列的统计信息"></a>查看数值类型的列的统计信息</h4><pre><code class="python">df.describe()
”“”
count  <span class="number">6.000000</span>  <span class="number">6.000000</span>  <span class="number">6.000000</span>  <span class="number">6.000000</span>
mean   <span class="number">0.073711</span> <span class="number">-0.431125</span> <span class="number">-0.687758</span> <span class="number">-0.233103</span>
std    <span class="number">0.843157</span>  <span class="number">0.922818</span>  <span class="number">0.779887</span>  <span class="number">0.973118</span>
min   <span class="number">-0.861849</span> <span class="number">-2.104569</span> <span class="number">-1.509059</span> <span class="number">-1.135632</span>
<span class="number">25</span>%   <span class="number">-0.611510</span> <span class="number">-0.600794</span> <span class="number">-1.368714</span> <span class="number">-1.076610</span>
<span class="number">50</span>%    <span class="number">0.022070</span> <span class="number">-0.228039</span> <span class="number">-0.767252</span> <span class="number">-0.386188</span>
<span class="number">75</span>%    <span class="number">0.658444</span>  <span class="number">0.041933</span> <span class="number">-0.034326</span>  <span class="number">0.461706</span>
max    <span class="number">1.212112</span>  <span class="number">0.567020</span>  <span class="number">0.276232</span>  <span class="number">1.071804</span>
“”“
</code></pre>
<h4 id="转置"><a href="#转置" class="headerlink" title="转置"></a>转置</h4><pre><code>df.T
</code></pre><h4 id="排序-1"><a href="#排序-1" class="headerlink" title="排序"></a>排序</h4><h5 id="索引排序"><a href="#索引排序" class="headerlink" title="索引排序"></a>索引排序</h5><p>默认是对行索引排序，axis=1 时对列索引排序</p>
<pre><code class="python">
df.sort_index(axis=<span class="number">1</span>, ascending=<span class="keyword">False</span>) <span class="comment"># 列索引逆序</span>
<span class="string">"""</span>
<span class="string">                   D         C         B         A</span>
<span class="string">2013-01-01 -1.135632 -1.509059 -0.282863  0.469112</span>
<span class="string">2013-01-02 -1.044236  0.119209 -0.173215  1.212112</span>
<span class="string">2013-01-03  1.071804 -0.494929 -2.104569 -0.861849</span>
<span class="string">2013-01-04  0.271860 -1.039575 -0.706771  0.721555</span>
<span class="string">2013-01-05 -1.087401  0.276232  0.567020 -0.424972</span>
<span class="string">2013-01-06  0.524988 -1.478427  0.113648 -0.673690</span>
<span class="string">"""</span>
</code></pre>
<h5 id="内容排序"><a href="#内容排序" class="headerlink" title="内容排序"></a>内容排序</h5><pre><code class="Python">
df.sort_values(by=<span class="string">'B'</span>)
<span class="string">"""</span>
<span class="string">                   A         B         C         D</span>
<span class="string">2013-01-03 -0.861849 -2.104569 -0.494929  1.071804</span>
<span class="string">2013-01-04  0.721555 -0.706771 -1.039575  0.271860</span>
<span class="string">2013-01-01  0.469112 -0.282863 -1.509059 -1.135632</span>
<span class="string">2013-01-02  1.212112 -0.173215  0.119209 -1.044236</span>
<span class="string">2013-01-06 -0.673690  0.113648 -1.478427  0.524988</span>
<span class="string">2013-01-05 -0.424972  0.567020  0.276232 -1.087401</span>
<span class="string">"""</span>
</code></pre>
<h2 id="选择"><a href="#选择" class="headerlink" title="选择"></a>选择</h2><p>列选择</p>
<p><code>df[&#39;A&#39;]</code>等价于 <code>df.A</code></p>
<p>行切片</p>
<p>​    <code>df[0:3]</code></p>
